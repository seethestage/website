//Bookmarks
document.addEventListener('DOMContentLoaded',e=>{const t=()=>{const e=document.getElementById('bookmarked-shows').textContent.match(/\[(.*?)\]/g).map(e=>e.slice(1,-1));setTimeout(()=>{document.querySelectorAll('.show-bookmark-id').forEach(t=>{e.includes(t.textContent.trim())&&((e=t.nextElementSibling)=>{while(e){if(e.classList.contains('bookmark-selected')){e.style.display='block',console.log("Updated display for:",e);break}e=e.nextElementSibling}})()})},100)};t(),document.getElementById('load-more-button').addEventListener('click',()=>{console.log("Clicked 'load-more-button'"),setTimeout(t,500)}),document.querySelectorAll('.dropdown-link').forEach(e=>{e.addEventListener('click',()=>{console.log("Clicked 'dropdown-link'"),setTimeout(t,500)})});const n=new MutationObserver(e=>{e.forEach(e=>{if("childList"===e.type&&(e.addedNodes.length>0||e.removedNodes.length>0)){const t=[...e.addedNodes,...e.removedNodes],n=t.some(e=>e.classList&&e.classList.contains('tag')),o=t.some(e=>e.classList&&e.classList.contains('row'));(n||o)&&console.log(`Mutation detected with '${n?"tag":"row"}' class`),setTimeout(t,500)}})});n.observe(document.body,{childList:!0,subtree:!0})}),document.addEventListener('DOMContentLoaded',function(){document.body.addEventListener('click',function(e){let t=e.target.closest('.bookmark-unselected');t?(console.log("Clicked inside 'bookmark-unselected'"),function(e){const t=e.parentNode.querySelector('.bookmark-selected');t&&(t.style.display='block');const n=e.parentNode.querySelector('.show-bookmark-id');if(n){const e=`[${n.textContent}]`,t=document.getElementById('bookmarked-shows');t.value+=e}document.getElementById('update-bookmarks-btn').click()}(t)):t=e.target.closest('.bookmark-selected'),t&&(console.log("Clicked inside 'bookmark-selected'"),function(e){e.style.display='none';const t=e.parentNode.querySelector('.show-bookmark-id');if(t){const e=`[${t.textContent}]`,n=document.getElementById('bookmarked-shows');n.value.includes(e)&&(n.value=n.value.replace(e,''))}document.getElementById('update-bookmarks-btn').click()}(t))})});
